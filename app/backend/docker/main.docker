FROM node:carbon
RUN apt-get update && apt-get install -y --no-install-recommends vim && apt-get clean
WORKDIR /usr/src/app
RUN groupadd -r nodejs && useradd -m -r -g nodejs nodejs && chown -R nodejs:nodejs /usr/src/app
USER nodejs
COPY package*.json ./
RUN npm install
# EXPOSE 3012
# HEALTHCHECK --interval=15s --retries=5 --timeout=30s --start-period=30s CMD curl -I -f "http://localhost:3012" || exit 1
COPY ./build/ .
CMD [ "npm", "start" ]
